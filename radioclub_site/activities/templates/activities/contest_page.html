{% extends "base.html" %}
{% load wagtailcore_tags %}

{% block title %}{{ page.title }}{% endblock %}

{% block content %}
<div class="container py-5">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Inicio</a></li>
            {% for ancestor in page.get_ancestors.specific %}
            {% if not ancestor.is_root %}
            <li class="breadcrumb-item"><a href="{% pageurl ancestor %}">{{ ancestor.title }}</a></li>
            {% endif %}
            {% endfor %}
            <li class="breadcrumb-item active">{{ page.title }}</li>
        </ol>
    </nav>

    <article>
        <h1 class="mb-3">{{ page.title }}</h1>
        
        <div class="d-flex flex-wrap gap-3 mb-4">
            <span class="badge bg-warning text-dark fs-6"><i class="bi bi-calendar me-1"></i>{{ page.date_from }}</span>
            {% if page.date_to %}<span class="badge bg-secondary fs-6">hasta {{ page.date_to }}</span>{% endif %}
        </div>

        {% if page.introduction %}
        <p class="lead mb-4">{{ page.introduction }}</p>
        {% endif %}

        {% include "core/blocks/stream_block.html" with content=page.body %}

        {% if page.rules_document %}
        <div class="mt-4 p-4 bg-light rounded">
            <h3><i class="bi bi-file-earmark-pdf me-2"></i>Bases del Concurso</h3>
            <a href="{{ page.rules_document.url }}" class="btn btn-primary">
                <i class="bi bi-download me-1"></i>Descargar bases ({{ page.rules_document.filename }})
            </a>
        </div>
        {% endif %}
    </article>
</div>
{% endblock %}
